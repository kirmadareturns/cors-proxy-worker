<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Transcript Extractor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 600px;
      width: 100%;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    input {
      flex: 1;
      padding: 14px 18px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s;
    }

    input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    button {
      padding: 14px 28px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .status {
      padding: 12px 18px;
      border-radius: 10px;
      margin-top: 20px;
      display: none;
      font-size: 14px;
    }

    .status.info {
      background: #e3f2fd;
      color: #1976d2;
      border-left: 4px solid #1976d2;
    }

    .status.success {
      background: #e8f5e9;
      color: #388e3c;
      border-left: 4px solid #388e3c;
    }

    .status.error {
      background: #ffebee;
      color: #d32f2f;
      border-left: 4px solid #d32f2f;
    }

    .instructions {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 10px;
      margin-top: 30px;
    }

    .instructions h3 {
      color: #333;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .instructions ol {
      padding-left: 20px;
      color: #666;
      line-height: 1.8;
      font-size: 14px;
    }

    .instructions li {
      margin-bottom: 8px;
    }

    .note {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px;
      border-radius: 5px;
      margin-top: 15px;
      font-size: 13px;
      color: #856404;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé¨ YouTube Transcript Extractor</h1>
    <p class="subtitle">Extract transcripts directly from YouTube - no API keys, no extensions</p>
    
    <div class="input-group">
      <input 
        type="text" 
        id="urlInput" 
        placeholder="Paste YouTube URL here..."
        autocomplete="off"
      >
      <button id="extractBtn">Extract</button>
    </div>

    <div id="status" class="status"></div>

    <div class="instructions">
      <h3>How it works:</h3>
      <ol>
        <li>Paste any YouTube video URL</li>
        <li>Click "Extract" or press Enter</li>
        <li>Instructions will appear - follow them to extract the transcript</li>
        <li>Copy the bookmarklet and save it</li>
        <li>Open the YouTube video and click the bookmarklet</li>
      </ol>
      <div class="note">
        <strong>Important:</strong> Due to browser security, you'll need to use a bookmarklet approach. This is a one-time setup that works forever.
      </div>
    </div>
  </div>

  <script>
    const urlInput = document.getElementById('urlInput');
    const extractBtn = document.getElementById('extractBtn');
    const status = document.getElementById('status');

    function showStatus(message, type) {
      status.innerHTML = message;
      status.className = `status ${type}`;
      status.style.display = 'block';
    }

    function extractVideoId(url) {
      const patterns = [
        /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
        /youtube\.com\/shorts\/([^&\n?#]+)/
      ];
      
      for (const pattern of patterns) {
        const match = url.match(pattern);
        if (match) return match[1];
      }
      return null;
    }

    function getBookmarkletCode() {
      const code = `(function(){if(document.getElementById('yt-transcript-overlay')){return;}const o=document.createElement('div');o.id='yt-transcript-overlay';o.innerHTML='<div style="position:fixed;top:20px;right:20px;width:400px;max-height:80vh;background:white;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.3);z-index:999999;display:flex;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif"><div style="padding:16px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px 12px 0 0"><h3 style="margin:0;font-size:16px;color:white">Transcript</h3><button id="yt-close-transcript" style="background:rgba(255,255,255,0.2);border:none;color:white;width:28px;height:28px;border-radius:6px;cursor:pointer;font-size:18px">√ó</button></div><div style="padding:16px;border-bottom:1px solid #e0e0e0;background:#f8f9fa"><div id="yt-transcript-stats" style="font-size:12px;color:#666"></div></div><div id="yt-transcript-content" style="flex:1;overflow-y:auto;padding:16px;line-height:1.6;font-size:14px;color:#333"><div style="text-align:center;padding:40px;color:#999">Extracting transcript...</div></div><div style="padding:12px;border-top:1px solid #e0e0e0;display:flex;gap:8px;background:#f8f9fa;border-radius:0 0 12px 12px"><button id="yt-copy-transcript" style="flex:1;padding:10px;background:#667eea;color:white;border:none;border-radius:6px;cursor:pointer;font-size:13px;font-weight:600">Copy</button><button id="yt-download-transcript" style="flex:1;padding:10px;background:#764ba2;color:white;border:none;border-radius:6px;cursor:pointer;font-size:13px;font-weight:600">Download</button></div></div>';document.body.appendChild(o);document.getElementById('yt-close-transcript').onclick=()=>o.remove();let t='';function e(){try{let a=null;if(window.ytInitialPlayerResponse){a=window.ytInitialPlayerResponse;}else{const s=document.querySelectorAll('script');for(let i of s){const c=i.textContent;if(c.includes('ytInitialPlayerResponse')){const m=c.match(/var ytInitialPlayerResponse\\s*=\\s*({.+?});/);if(m){a=JSON.parse(m[1]);break;}}}}if(!a)throw new Error('Player data not found. Try refreshing the page.');const p=a.captions;if(!p)throw new Error('No captions available for this video.');const r=p.playerCaptionsTracklistRenderer?.captionTracks;if(!r||r.length===0)throw new Error('No caption tracks found.');const k=r.find(x=>x.languageCode==='en')||r[0];const u=k.baseUrl;fetch(u).then(res=>res.text()).then(xml=>{const pr=new DOMParser();const dc=pr.parseFromString(xml,'text/xml');const tn=dc.querySelectorAll('text');const ln=Array.from(tn).map(n=>n.textContent.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\\n/g,' ').trim());t=ln.join(' ');const w=t.split(/\\s+/).filter(x=>x.length>0).length;const ch=t.length;document.getElementById('yt-transcript-stats').innerHTML='<strong>Words:</strong> '+w.toLocaleString()+' | <strong>Characters:</strong> '+ch.toLocaleString();document.getElementById('yt-transcript-content').innerHTML='<div style="white-space:pre-wrap;word-wrap:break-word">'+t+'</div>';document.getElementById('yt-copy-transcript').onclick=()=>{navigator.clipboard.writeText(t).then(()=>{const b=document.getElementById('yt-copy-transcript');const og=b.textContent;b.textContent='‚úì Copied!';setTimeout(()=>b.textContent=og,2000);});};document.getElementById('yt-download-transcript').onclick=()=>{const bl=new Blob([t],{type:'text/plain'});const ul=URL.createObjectURL(bl);const a=document.createElement('a');a.href=ul;a.download='youtube-transcript.txt';a.click();URL.revokeObjectURL(ul);};}).catch(err=>{document.getElementById('yt-transcript-content').innerHTML='<div style="color:#d32f2f;text-align:center;padding:20px">Failed to fetch captions: '+err.message+'</div>';});}catch(err){document.getElementById('yt-transcript-content').innerHTML='<div style="color:#d32f2f;text-align:center;padding:20px">Error: '+err.message+'<br><br><small>Make sure you are on a YouTube video page with captions.</small></div>';}}if(document.readyState==='complete'){setTimeout(e,500);}else{window.addEventListener('load',()=>setTimeout(e,500));}})();`;
      return 'javascript:' + encodeURIComponent(code);
    }

    function extractTranscript() {
      const url = urlInput.value.trim();
      
      if (!url) {
        showStatus('Please enter a YouTube URL', 'error');
        return;
      }

      const videoId = extractVideoId(url);
      
      if (!videoId) {
        showStatus('Invalid YouTube URL', 'error');
        return;
      }

      const youtubeUrl = `https://www.youtube.com/watch?v=${videoId}`;
      const bookmarkletCode = getBookmarkletCode();

      showStatus(`
        <strong>‚úÖ Step 1: Create Bookmarklet</strong><br><br>
        Drag this link to your bookmarks bar: <a href="${bookmarkletCode}" style="display:inline-block;padding:8px 16px;background:#667eea;color:white;text-decoration:none;border-radius:6px;margin:10px 0;font-weight:600;" onclick="alert('Drag this button to your bookmarks bar (don\\'t click it here)');return false;">üìù Extract Transcript</a>
        <br><br>
        <em>Can't see bookmarks bar? Press Ctrl+Shift+B (Windows) or Cmd+Shift+B (Mac)</em>
        <br><br>
        <strong>‚úÖ Step 2: Open Video</strong><br>
        <a href="${youtubeUrl}" target="_blank" style="color:#667eea;font-weight:600;">Click here to open the video in a new tab ‚Üí</a>
        <br><br>
        <strong>‚úÖ Step 3: Extract</strong><br>
        Once on YouTube, click the "Extract Transcript" bookmarklet you just saved.
        <br><br>
        <button onclick="navigator.clipboard.writeText('${bookmarkletCode}');this.textContent='‚úì Copied!';setTimeout(()=>this.textContent='Copy Bookmarklet Code',2000);" style="padding:10px 20px;background:#764ba2;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:600;margin-top:10px;">Copy Bookmarklet Code</button>
      `, 'info');
    }

    extractBtn.addEventListener('click', extractTranscript);
    
    urlInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        extractTranscript();
      }
    });

    urlInput.focus();
  </script>
</body>
</html>
