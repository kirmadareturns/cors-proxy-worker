<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Woofy Image Compressor - Free Online PNG & JPG Compression Tool</title>
    <meta name="description" content="Free online image compressor tool. Compress PNG, JPG, and convert to WebP format. Reduce image file sizes by up to 90% without losing quality. Fast, secure, and works in your browser.">
    <meta name="keywords" content="image compressor, compress png, compress jpg, reduce image size, webp converter, image optimization, free image compressor">
    <meta name="author" content="Woofy Image Compressor">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://yoursite.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/">
    <meta property="og:title" content="Woofy Image Compressor - Free Online Image Compression">
    <meta property="og:description" content="Compress PNG & JPG images up to 90% without losing quality. Free online tool with WebP conversion support.">
    <meta property="og:image" content="https://yoursite.com/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yoursite.com/">
    <meta property="twitter:title" content="Woofy Image Compressor - Free Online Image Compression">
    <meta property="twitter:description" content="Compress PNG & JPG images up to 90% without losing quality. Free online tool with WebP conversion support.">
    <meta property="twitter:image" content="https://yoursite.com/twitter-image.jpg">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#4bd37b">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üêï</text></svg>">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Woofy Image Compressor",
      "description": "Free online image compression tool that compresses PNG and JPG images and converts them to WebP format without losing quality.",
      "url": "https://yoursite.com/",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Compress PNG images",
        "Compress JPG/JPEG images",
        "Convert images to WebP format",
        "Batch image compression",
        "Download compressed images as ZIP",
        "Target file size compression",
        "Resize images",
        "Client-side processing (secure)",
        "No file size limits"
      ],
      "browserRequirements": "Requires JavaScript. Works best with modern browsers.",
      "screenshot": "https://yoursite.com/screenshot.jpg"
    }
    </script>
    
    <style>
        /* Critical CSS - Inline for Performance */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #4bd37b;
            --primary-dark: #3ab565;
            --secondary-color: #007bff;
            --danger-color: #ff4444;
            --text-color: #1b2023;
            --text-light: #666;
            --bg-color: #f4f7f9;
            --bg-white: #ffffff;
            --border-color: #e0e4e8;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.15);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #f4f7f9 0%, #e8eef2 100%);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        header {
            text-align: center;
            padding: 20px 0 30px;
        }
        
        h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: var(--text-color);
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: var(--text-light);
            margin-bottom: 20px;
        }
        
        /* Upload Area */
        .uploadDropWrap {
            background: var(--bg-white);
            border: 3px dashed var(--border-color);
            border-radius: var(--radius);
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            box-shadow: var(--shadow);
        }
        
        .uploadDropWrap:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .uploadDropWrap.highlight {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #e6f9f0 0%, #f0fdf7 100%);
            transform: scale(1.02);
        }
        
        .uploadDropWrap--popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 99;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .uploadDropWrap--popup::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }
        
        .dropboxTitle {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .dropboxSubtitle {
            font-size: 0.95rem;
            color: var(--text-light);
            margin-bottom: 25px;
        }
        
        .form_file_upload_field {
            display: none;
        }
        
        #uploadDropButton {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 14px 32px;
            font-size: 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(75, 211, 123, 0.3);
        }
        
        #uploadDropButton:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(75, 211, 123, 0.4);
        }
        
        /* File Management Section */
        #theFiles {
            display: none;
            background: var(--bg-white);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }
        
        #fileControls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        #fileControls button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            font-weight: 500;
        }
        
        #fileControls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
        }
        
        #recompress {
            background: var(--primary-color);
            display: none;
        }
        
        #recompress.recompress--show {
            display: block;
        }
        
        .settings_panel {
            width: 100%;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #f8f9fa;
            border-radius: var(--radius);
            margin-top: 10px;
        }
        
        #fileControls.show_settings .settings_panel {
            max-height: 500px;
            padding: 20px;
        }
        
        .settings_panel h3 {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .setting_group {
            margin-bottom: 15px;
        }
        
        .setting_group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .setting_group input[type="number"],
        .setting_group input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 0.9rem;
        }
        
        .setting_group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .setting_target_size_kb__val {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .setting_help_text {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 5px;
            font-style: italic;
        }
        
        /* File List */
        #fileList ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        #fileList li {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
        }
        
        #fileList li:hover {
            background: #f8f9fa;
        }
        
        #fileList li:last-child {
            border-bottom: none;
        }
        
        #fileList li.file_converted {
            background: linear-gradient(90deg, #f0fdf7 0%, transparent 100%);
        }
        
        .file_done_icon {
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .img_wrapper {
            position: relative;
            width: 80px;
            height: 80px;
            flex-shrink: 0;
            border-radius: var(--radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .img_wrapper:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow);
        }
        
        .img_wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .fileContent {
            flex-grow: 1;
            min-width: 0;
        }
        
        .fileTitle {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .fileSize {
            display: block;
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        .fileSize strong {
            color: var(--primary-color);
        }
        
        .fileNewDownload {
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius);
            transition: var(--transition);
        }
        
        .fileNewDownload:hover {
            background: #f0fdf7;
        }
        
        .fileNewDownload svg {
            width: 24px;
            height: 24px;
        }
        
        .fileNewSize {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1rem;
            min-width: 60px;
            text-align: right;
        }
        
        /* Progress and Status */
        .compression_status {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-color);
        }
        
        .compression_status--complete {
            color: var(--primary-color);
        }
        
        #compress_progress {
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-color);
        }
        
        #compress_progress.compression_complete {
            color: var(--primary-color);
        }
        
        #progressbar {
            height: 24px;
            background: #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 10px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        #progressbar span {
            display: block;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 12px;
        }
        
        .fileList_footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border-color);
        }
        
        .fileList_footer__beforeAfter,
        .fileList_footer__totalSaving,
        .fileList_footer__processing {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        
        .fileList_footer__beforeAfter strong,
        .fileList_footer__totalSaving strong {
            color: var(--primary-color);
        }
        
        .file_controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .file_controls button {
            flex: 1;
            min-width: 140px;
            padding: 12px 20px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: var(--transition);
        }
        
        #clear_added_files {
            background: #6c757d;
            color: white;
        }
        
        #clear_added_files:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        #uploadControlButton {
            background: var(--secondary-color);
            color: white;
        }
        
        #uploadControlButton:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .file_download {
            background: var(--primary-color);
            color: white;
        }
        
        .file_download:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        /* Responsive Design - Mobile First */
        @media (max-width: 768px) {
            .main {
                padding: 15px;
            }
            
            header {
                padding: 15px 0 20px;
            }
            
            .uploadDropWrap {
                padding: 40px 15px;
            }
            
            #theFiles {
                padding: 15px;
            }
            
            #fileControls {
                flex-direction: column;
            }
            
            #fileControls button {
                width: 100%;
            }
            
            #fileList li {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .img_wrapper {
                width: 60px;
                height: 60px;
            }
            
            .fileContent {
                flex-basis: calc(100% - 80px);
            }
            
            .fileNewSize {
                min-width: auto;
            }
            
            .file_controls {
                flex-direction: column;
            }
            
            .file_controls button {
                width: 100%;
                min-width: auto;
            }
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        /* Loading State */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body id="theApp">
    
    <main class="main">
        <header>
            <h1>üêï Woofy Image Compressor</h1>
            <p class="subtitle">Compress PNG & JPG images with adaptive quality ‚Ä¢ Convert to WebP ‚Ä¢ Free & Secure</p>
        </header>
        
        <article>
            <section class="uploadDropWrap">
                <input type="file" class="form_file_upload_field" accept="image/jpeg,image/jpg,image/png" multiple aria-label="Select image files to compress">
                <div id="uploadDrop" class="dropArea" role="button" tabindex="0" aria-label="Drag and drop images here or click to select">
                    <p class="dropboxTitle">üìÅ Drag & Drop .png or .jpg files here!</p>
                    <p class="dropboxSubtitle">Or paste images from clipboard (Ctrl+V / Cmd+V)</p>
                    <button id="uploadDropButton" type="button">üì§ or Click to Select Files</button>
                </div>
            </section>
            
            <!-- File Management Section -->
            <section id="theFiles">
                <div id="fileControls">
                    <button type="button" onclick="showSettings()" aria-expanded="false" aria-controls="settings">‚öôÔ∏è Settings</button>
                    <button type="button" id="recompress" onclick="recompress()">üîÑ Recompress</button>
                    
                    <div id="settings" class="settings_panel" role="region" aria-labelledby="settings-heading">
                        <h3 id="settings-heading">Compression Settings</h3>
                        
                        <div class="setting_group">
                            <label for="setting_target_size_kb">Target File Size (KB): <span class="setting_target_size_kb__val">150 KB</span></label>
                            <input 
                                type="number" 
                                id="setting_target_size_kb" 
                                min="10" 
                                max="10000" 
                                value="150" 
                                step="10"
                                oninput="updateTargetSize(this.value, false)" 
                                onchange="updateTargetSize(this.value, true)"
                                aria-valuemin="10"
                                aria-valuemax="10000"
                                aria-valuenow="150"
                            >
                            <p class="setting_help_text">Adaptive compression will find the best quality to match this file size</p>
                        </div>
                        
                        <div class="setting_group">
                            <label for="setting_image_widthHeight">Max Width/Height (px):</label>
                            <input 
                                type="number" 
                                id="setting_image_widthHeight" 
                                placeholder="e.g., 1920" 
                                oninput="updateMaxSize(this.value, false)" 
                                onchange="updateMaxSize(this.value, true)"
                                min="100"
                                step="100"
                            >
                        </div>
                        
                        <div class="setting_group">
                            <label for="setting_image_webp">
                                <input 
                                    type="checkbox" 
                                    id="setting_image_webp" 
                                    onchange="updateWebpSetting()"
                                >
                                Convert to WebP format
                            </label>
                        </div>
                        
                        <div class="setting_group">
                            <label for="setting_image_prefix">Filename Prefix (e.g., '-min'):</label>
                            <input 
                                type="text" 
                                id="setting_image_prefix" 
                                placeholder="e.g., -min" 
                                oninput="updateImagePrefix(this.value, false)" 
                                onchange="updateImagePrefix(this.value, true)"
                                maxlength="20"
                            >
                        </div>
                    </div>
                </div>
                
                <!-- File List -->
                <div id="fileList" role="list">
                    <ul></ul>
                </div>
                
                <!-- Footer with Progress -->
                <footer class="fileList_footer">
                    <div class="compression_status" role="status" aria-live="polite">Waiting for files...</div>
                    
                    <div id="compress_progress" data-compressed="0" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <span id="progressbar"><span></span></span>
                        <i style="font-style: normal;">0</i>%
                    </div>
                    
                    <div class="fileList_footer__beforeAfter" aria-live="polite"></div>
                    <div class="fileList_footer__totalSaving" aria-live="polite"></div>
                    <div class="fileList_footer__processing" style="display: none;" aria-live="polite"></div>
                    
                    <div class="file_controls">
                        <button type="button" id="clear_added_files">üóëÔ∏è <i>Clear Files</i></button>
                        <button type="button" id="uploadControlButton">‚ûï <i>Add More Files</i></button>
                        <button type="button" class="file_download" onclick="zipFiles()" data-compressed="0">
                            <i>üì¶ Download Zip</i>
                        </button>
                    </div>
                </footer>
            </section>
        </article>
    </main>
    
    <!-- External Libraries -->
    <script defer src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/compressorjs@1.2.1/dist/compressor.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    
    <!-- WebP Encoder Module -->
    <script type="module">
        import webp_enc from 'https://cdn.jsdelivr.net/npm/@jsquash/webp@1.2.0/codec/enc/webp_enc.js';
        window.webp_enc = webp_enc;
    </script>
    
    <!-- Main Application Script -->
    <script defer src="my-app.js"></script>
    
    <!-- Clipboard Paste Support -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Clipboard paste support for images
            window.addEventListener('paste', function(e) {
                const items = e.clipboardData?.items;
                if (!items) return;
                
                const imageFiles = [];
                for (let i = 0; i < items.length; i++) {
                    if (items[i].type.indexOf('image') !== -1) {
                        const blob = items[i].getAsFile();
                        if (blob) {
                            imageFiles.push(blob);
                        }
                    }
                }
                
                if (imageFiles.length > 0) {
                    e.preventDefault();
                    
                    // Create a FileList-like object
                    const dataTransfer = new DataTransfer();
                    imageFiles.forEach(file => dataTransfer.items.add(file));
                    
                    const pastedFiles = dataTransfer.files;
                    
                    // Trigger file processing
                    if (typeof hideDropField === 'function') hideDropField();
                    if (typeof allAddedFiles !== 'undefined') {
                        allAddedFiles.push(pastedFiles);
                    }
                    if (typeof processFiles === 'function') {
                        processFiles(pastedFiles);
                    }
                }
            });
            
            // Keyboard accessibility for drop area
            const uploadDrop = document.getElementById('uploadDrop');
            if (uploadDrop) {
                uploadDrop.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        document.querySelector('.form_file_upload_field')?.click();
                    }
                });
            }
        });
    </script>
</body>
</html>
